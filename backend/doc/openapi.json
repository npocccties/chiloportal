{
  "openapi": "3.0.3",
  "info": {
    "title": "Portal Badges API",
    "description": "教員研修システム向けバッジ関連データ取得API",
    "version": "0.9.0"
  },
  "servers": [
    {
      "url": "https://chiloportal.example.com/api/v1"
    }
  ],
  "tags": [
    {
      "name": "consumer",
      "description": "コンシューマ情報取得"
    },
    {
      "name": "consumer list",
      "description": "コンシューマ情報一覧"
    },
    {
      "name": "category list",
      "description": "カテゴリ一覧"
    },
    {
      "name": "category",
      "description": "カテゴリ取得"
    },
    {
      "name": "categorised badge",
      "description": "カテゴライズドバッジ情報取得"
    },
    {
      "name": "course",
      "description": "受講対象取得"
    },
    {
      "name": "course_level",
      "description": "受講レベル取得"
    },
    {
      "name": "find",
      "description": "バッジ検索（すべて）"
    },
    {
      "name": "find course",
      "description": "バッジ検索（受講対象）"
    },
    {
      "name": "find course level",
      "description": "バッジ検索（受講レベル）"
    },
    {
      "name": "find badges",
      "description": "バッジ検索（バッジ名称）"
    },
    {
      "name": "badges",
      "description": "バッジ情報取得"
    },
    {
      "name": "badges list",
      "description": "バッジ一覧取得"
    },
    {
      "name": "badges consumer list",
      "description": "バッジを承認しているコンシューマの一覧取得"
    },
    {
      "name": "badges training list",
      "description": "バッジの研修内容一覧取得"
    }
  ],
  "paths": {
    "/consumer": {
      "get": {
        "tags": [
          "consumer"
        ],
        "description": "指定されたコンシューマIDに該当するコンシューマ情報を返却します",
        "operationId": "findConsumer",
        "parameters": [
          {
            "name": "consumer_id",
            "in": "query",
            "description": "consumer id",
            "required": true,
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Consumer"
                }
              }
            }
          },
          "400": {
            "description": "Invalid ID supplied"
          },
          "404": {
            "description": "Consumer not found"
          },
          "405": {
            "description": "Validation exception"
          }
        }
      }
    },
    "/consumer/list": {
      "get": {
        "tags": [
          "consumer list"
        ],
        "description": "登録されているコンシューマ情報を一覧で返却します",
        "operationId": "findConsumerList",
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Consumer"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Consumer not found"
          }
        }
      }
    },
    "/category/list": {
      "get": {
        "tags": [
          "category list"
        ],
        "description": "指定されたコンシューマIDで登録されているカテゴリ情報を一覧で返却します",
        "operationId": "findCategoryList",
        "parameters": [
          {
            "name": "consumer_id",
            "in": "query",
            "description": "consumer id",
            "required": true,
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Category"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid ID supplied"
          },
          "404": {
            "description": "Consumer not found"
          },
          "405": {
            "description": "Validation exception"
          }
        }
      }
    },
    "/category": {
      "get": {
        "tags": [
          "category"
        ],
        "description": "指定されたカテゴリIDに該当するカテゴリ情報を返却します",
        "operationId": "findCategory",
        "parameters": [
          {
            "name": "category_id",
            "in": "query",
            "description": "category id",
            "required": true,
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Category"
                }
              }
            }
          },
          "400": {
            "description": "Invalid ID supplied"
          },
          "404": {
            "description": "Category not found"
          },
          "405": {
            "description": "Validation exception"
          }
        }
      }
    },
    "/categorisedBadge": {
      "get": {
        "tags": [
          "categorised badge"
        ],
        "description": "指定されたカテゴリIDに該当するカテゴライズドバッジ情報を返却します",
        "operationId": "findCategorisedbadge",
        "parameters": [
          {
            "name": "category_id",
            "in": "query",
            "description": "category id",
            "required": true,
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategorisedBadge"
                }
              }
            }
          },
          "400": {
            "description": "Invalid ID supplied"
          },
          "404": {
            "description": "Category not found"
          },
          "405": {
            "description": "Validation exception"
          }
        }
      }
    },
    "/course": {
      "get": {
        "tags": [
          "course"
        ],
        "description": "指定された受講対象IDに該当する受講対象情報を返却します",
        "operationId": "findCourse",
        "parameters": [
          {
            "name": "course_id",
            "in": "query",
            "description": "course id",
            "required": true,
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Course"
                }
              }
            }
          },
          "400": {
            "description": "Invalid ID supplied"
          },
          "404": {
            "description": "Consumer not found"
          },
          "405": {
            "description": "Validation exception"
          }
        }
      }
    },
    "/course_level": {
      "get": {
        "tags": [
          "course_level"
        ],
        "description": "指定された受講レベルIDに該当する受講レベル情報を返却します",
        "operationId": "findCourseLevel",
        "parameters": [
          {
            "name": "course_level_id",
            "in": "query",
            "description": "course level id",
            "required": true,
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Course_level"
                }
              }
            }
          },
          "400": {
            "description": "Invalid ID supplied"
          },
          "404": {
            "description": "Consumer not found"
          },
          "405": {
            "description": "Validation exception"
          }
        }
      }
    },
    "/find": {
      "get": {
        "tags": [
          "find"
        ],
        "description": "指定されたキーワードに関連する受講対象/受講レベル/バッジ情報のすべてからバッジ情報を返却します",
        "operationId": "findKeywordAll",
        "parameters": [
          {
            "name": "keyword",
            "in": "query",
            "description": "keyword",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CategorisedBadgeDetail"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid keyword supplied"
          },
          "404": {
            "description": "Data not found"
          },
          "405": {
            "description": "Validation exception"
          }
        }
      }
    },
    "/find/course": {
      "get": {
        "tags": [
          "find course"
        ],
        "description": "指定されたキーワードに関連する受講対象のバッジ情報を返却します",
        "operationId": "findKeywordCourse",
        "parameters": [
          {
            "name": "keyword",
            "in": "query",
            "description": "keyword",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CategorisedBadgeDetail"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid keyword supplied"
          },
          "404": {
            "description": "Data not found"
          },
          "405": {
            "description": "Validation exception"
          }
        }
      }
    },
    "/find/level": {
      "get": {
        "tags": [
          "find course level"
        ],
        "description": "指定されたキーワードに関連する受講レベルのバッジ情報を返却します",
        "operationId": "findKeywordCourseLevel",
        "parameters": [
          {
            "name": "keyword",
            "in": "query",
            "description": "keyword",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CategorisedBadgeDetail"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid keyword supplied"
          },
          "404": {
            "description": "Data not found"
          },
          "405": {
            "description": "Validation exception"
          }
        }
      }
    },
    "/find/badges": {
      "get": {
        "tags": [
          "find badges"
        ],
        "description": "指定されたキーワードに関連するバッジのバッジ情報を返却します",
        "operationId": "findKeywordBadges",
        "parameters": [
          {
            "name": "keyword",
            "in": "query",
            "description": "keyword",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CategorisedBadgeDetail"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid keyword supplied"
          },
          "404": {
            "description": "Data not found"
          },
          "405": {
            "description": "Validation exception"
          }
        }
      }
    },
    "/badges": {
      "get": {
        "tags": [
          "badges"
        ],
        "description": "指定されたバッジIDのバッジ関連情報を返却します",
        "operationId": "findBadges",
        "parameters": [
          {
            "name": "badge_id",
            "in": "query",
            "description": "badge id",
            "required": true,
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BadgeDetail"
                }
              }
            }
          },
          "400": {
            "description": "Invalid ID supplied"
          },
          "404": {
            "description": "Badge not found"
          },
          "405": {
            "description": "Validation exception"
          }
        }
      }
    },
    "/badges/list": {
      "get": {
        "tags": [
          "badges list"
        ],
        "description": "バッジ一覧を返却します",
        "operationId": "Badges",
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Badges"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Badge not found"
          }
        }
      }
    },
    "/badges/consumer": {
      "get": {
        "tags": [
          "badges consumer list"
        ],
        "description": "指定されたバッジIDに関連するコンシューマのリストを返却します",
        "operationId": "findBadgesConsumer",
        "parameters": [
          {
            "name": "badge_id",
            "in": "query",
            "description": "Badge id",
            "required": true,
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Consumer"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid ID supplied"
          },
          "404": {
            "description": "Badge not found"
          },
          "405": {
            "description": "Validation exception"
          }
        }
      }
    },
    "/badges/training": {
      "get": {
        "tags": [
          "badges training list"
        ],
        "description": "指定されたバッジIDに関連する研修内容のリストを返却します",
        "operationId": "findBadgesTraining",
        "parameters": [
          {
            "name": "badge_id",
            "in": "query",
            "description": "Badge id",
            "required": true,
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Training"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid ID supplied"
          },
          "404": {
            "description": "Badge not found"
          },
          "405": {
            "description": "Validation exception"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Consumer": {
        "type": "object",
        "properties": {
          "consumer_id": {
            "type": "integer",
            "format": "int64",
            "example": 101
          },
          "consumer_name": {
            "type": "string",
            "example": "consumer101"
          },
          "consumer_url": {
            "type": "string",
            "example": "https://example.com/consumer101/"
          },
          "consumer_email": {
            "type": "string",
            "example": "consumer101@example.com"
          }
        }
      },
      "Category": {
        "type": "object",
        "properties": {
          "category_id": {
            "type": "integer",
            "format": "int64",
            "example": 101
          },
          "category1_name": {
            "type": "string",
            "example": "category1011"
          },
          "category2_name": {
            "type": "string",
            "example": "category1012"
          },
          "category3_name": {
            "type": "string",
            "example": "category1013"
          }
        }
      },
      "CategorisedBadge": {
        "type": "object",
        "properties": {
          "category_id": {
            "type": "integer",
            "format": "int64",
            "example": 101
          },
          "consumer_id": {
            "type": "integer",
            "format": "int64",
            "example": 101
          },
          "badge_id": {
            "type": "integer",
            "format": "int64",
            "example": 101
          },
          "course_id": {
            "type": "integer",
            "format": "int64",
            "example": 101
          },
          "course_level_id": {
            "type": "integer",
            "format": "int64",
            "example": 101
          },
          "description": {
            "type": "string",
            "example": "categorised badge description..."
          }
        }
      },
      "CategorisedBadgeDetail": {
        "type": "object",
        "properties": {
          "category": {
            "type": "object",
            "items": {
              "$ref": "#/components/schemas/Category"
            }
          },
          "consumer": {
            "type": "object",
            "items": {
              "$ref": "#/components/schemas/Consumer"
            }
          },
          "badge": {
            "type": "object",
            "items": {
              "$ref": "#/components/schemas/BadgeDetail"
            }
          },
          "course": {
            "type": "object",
            "items": {
              "$ref": "#/components/schemas/Course"
            }
          },
          "course_level": {
            "type": "object",
            "items": {
              "$ref": "#/components/schemas/Course_level"
            }
          },
          "description": {
            "type": "string",
            "example": "categorised badge description..."
          }
        }
      },
      "Course": {
        "type": "object",
        "properties": {
          "course_id": {
            "type": "integer",
            "format": "int64",
            "example": 101
          },
          "course_name": {
            "type": "string",
            "example": "course101"
          },
          "course_description": {
            "type": "string",
            "example": "course101 description..."
          }
        }
      },
      "Course_level": {
        "type": "object",
        "properties": {
          "course_level_id": {
            "type": "integer",
            "format": "int64",
            "example": 101
          },
          "level_name": {
            "type": "string",
            "example": "course_level101"
          },
          "level_description": {
            "type": "string",
            "example": "course_level101 description..."
          }
        }
      },
      "Training": {
        "type": "object",
        "properties": {
          "badge_id": {
            "type": "integer",
            "format": "int64",
            "example": 101
          },
          "training_type": {
            "type": "string",
            "example": "training_type101"
          },
          "training_name": {
            "type": "string",
            "example": "trainig_name101"
          }
        }
      },
      "Badges": {
        "type": "object",
        "properties": {
          "badge_id": {
            "type": "integer",
            "format": "int64",
            "example": 101
          },
          "badge_name": {
            "type": "string",
            "example": "degitalbadge101"
          },
          "badge_image": {
            "type": "string",
            "example": "degitalbadge101.jpg"
          }
        }
      },
      "BadgeList": {
        "type": "integer",
        "format": "int64",
        "example": 101
      },
      "BadgeDetail": {
        "type": "object",
        "properties": {
          "badge_id": {
            "type": "integer",
            "format": "int64",
            "example": 101
          },
          "badge_type": {
            "type": "string",
            "enum": [
              "knowledge",
              "wisdom"
            ]
          },
          "badge_name": {
            "type": "string",
            "example": "degitalbadge101"
          },
          "badge_description": {
            "type": "string",
            "example": "degitalbadge101_description"
          },
          "badge_image": {
            "type": "string",
            "example": "degitalbadge101.jpg"
          },
          "badge_class": {
            "type": "string",
            "example": "degitalbadge_classID"
          },
          "badge_detail": {
            "oneOf": [
              {
                "$ref": "#/components/schemas/knowledge"
              },
              {
                "$ref": "#/components/schemas/wisdom"
              }
            ]
          },
          "badge_url": {
            "type": "string",
            "example": "https://example/knowledge/url/sample"
          }
        }
      },
      "wisdom": {
        "type": "object",
        "properties": {
          "knowledge_badge": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/BadgeList"
            }
          }
        }
      },
      "knowledge": {
        "type": "object",
        "properties": {
          "training_type": {
            "type": "string",
            "example": "training type"
          },
          "training_name": {
            "type": "string",
            "example": "training name"
          }
        }
      }
    }
  }
}